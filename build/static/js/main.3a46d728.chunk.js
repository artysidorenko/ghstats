(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{191:function(e,t,n){e.exports=n(416)},197:function(e,t,n){},204:function(e,t,n){},205:function(e,t,n){},222:function(e,t){},224:function(e,t){},256:function(e,t){},257:function(e,t){},322:function(e,t){},416:function(e,t,n){"use strict";n.r(t);var a=n(190),o=n(2),r=n.n(o),i=n(182),s=n.n(i),c=n(48),l=n(86),u=n(187),h=n(188),p=n(189),d=(n(197),n(25)),g=n(26),m=n(32),f=n(31),v=n(33),y=n(85),b=n.n(y),k=n(7),w=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"];function _(e,t){return new Date(parseInt("20".concat(t.slice(3))),e.indexOf(t.slice(0,3)),1)}var E=n(116);function C(){var e=Object(E.a)(["\n  query {\n  rateLimit {\n    cost\n    remaining\n    resetAt\n  \n  }\n  ","\n}\n"]);return C=function(){return e},e}function S(){var e=Object(E.a)(['\n  query {\n  rateLimit {\n    cost\n    remaining\n    resetAt\n  }\n  ALL: search (\n    type: REPOSITORY\n    query: "created:','"\n  ) {\n    repositoryCount\n  }\n  ',"\n  }\n"]);return S=function(){return e},e}var T=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],O=["10","11","12","13","14","15","16","17","18","19"],L=["01","02","03","04","05","06","07","08","09","10","11","12"],j=["Javascript","Java","Python","CSS","PHP","Ruby","C++","C","Shell","C#","HTML","Go","Typescript","Swift","Scala"],x=function(e,t){return"\n".concat(e.replace("++","plusplus").replace("#","sharp"),': search (\n    type: REPOSITORY\n    query: "created:').concat(t," language:").concat(e,'"\n  ) {\n    repositoryCount\n  }\n')},M=function(e,t,n){for(var a="",o=e,r=0;o!==t&&r<120;)a+="".concat(A(o.slice(0,3),"20".concat(o.slice(3)),n)),o="dec"===o.slice(0,3)?"jan".concat(parseInt(o.slice(3))+1):"".concat(T[T.indexOf(o.slice(0,3))+1]).concat(o.slice(3)),r++;return a},A=function(e,t,n){return"\n".concat(e).concat(t.slice(2),': search (\n    type: REPOSITORY\n    query: "created:').concat(t,"-").concat(L[T.indexOf(e)]," language:").concat(n,'"\n  ) {\n    repositoryCount\n  } \n')},I=function(e){function t(){return Object(d.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"LineGraph__container",style:{position:"relative"}})}},{key:"componentDidMount",value:function(){console.log("mounted"),this.props.data&&this.drawGraph(this.props.data)}},{key:"componentDidUpdate",value:function(e){console.log("updating"),this.props.data!==e.data&&(this.removeGraph(),this.drawGraph(this.props.data))}},{key:"removeGraph",value:function(){console.log("removing old graph"),k.n(".LineGraph__container > *").remove()}},{key:"formatMobile",value:function(e){return window.innerWidth<736?"Jan"===e.toString().slice(4,7)?e.toString().slice(11,15):e.toString().slice(4,7):e}},{key:"drawGraph",value:function(e){var t=this,n=Object.entries(e).slice(1),a=window.innerWidth>736?{top:50,right:50,bottom:50,left:75}:{top:25,right:25,bottom:25,left:50},o=(window.innerWidth,400-a.top-a.bottom),r=window.innerWidth>736?736-a.left-a.right:350-a.left-a.right,i=function(e,t,n,a){return{xScale:k.k().domain([_(w,e[0][0]),_(w,e[e.length-1][0])]).range([0,a]),yScale:k.i().domain([.95*k.h(e,function(e){return e[1][t]}),1.05*k.g(e,function(e){return e[1][t]})]).range([n,0])}}(n,"repositoryCount",o,r),s=i.xScale,c=i.yScale,l=function(e,t){return{xAxis:k.a(e),yAxis:k.b(t)}}(s,c),u=l.xAxis,h=l.yAxis,p=k.m(".LineGraph__container").append("svg").attr("width",r+a.left+a.right).attr("height",o+a.top+a.bottom).append("g").attr("transform","translate("+a.left+","+a.top+")").attr("class","LineGraph__canvas");p.append("g").attr("transform","translate(0,"+o+")").attr("class","LineGraph__xAxis").call(u.tickFormat(function(e){return t.formatMobile(e)})).selectAll("text").attr("dy",".5em").attr("transform","rotate(315)").style("text-anchor","end"),p.append("g").attr("transform","translate(0,0)").attr("class","LineGraph__yAxis").call(h),p.append("path").datum(n).attr("class","LineGraph__line").attr("d",function(e,t,n,a){return k.f().x(function(e){return t(_(a,e[0]))}).y(function(t){return n(t[1][e])})}("repositoryCount",s,c,T)).style("fill","none").style("stroke","black"),p.selectAll("circle").data(n).enter().append("circle").attr("cy",function(e){return c(e[1].repositoryCount)}).attr("cx",function(e){return s(_(T,e[0]))}).attr("r",4).attr("fill","black").on("mouseover",function(e,t){k.m(this).style("cursor","pointer"),k.m(".LineGraph__tooltip").style("opacity",1).style("top","".concat(c(e[1].repositoryCount)+a.top+function(e,t){return 2*e>t?-.5*t:0}(c(e[1].repositoryCount)+a.top,o),"px")).style("left","".concat(s(_(T,e[0]))+2*a.left+function(e,t){return 2*e>t?-.5*t:0}(s(_(T,e[0]))+2*a.left,r),"px")).style("padding","0 10px").html("\n          <p>Period: ".concat(e[0][0].toUpperCase()+e[0].slice(1,3),"-").concat(e[0].slice(3,5),"</p>\n          <p>New Repos: ").concat(k.d(",")(e[1].repositoryCount),"</p>\n        "))}).on("mouseout",function(e,t){k.m(".LineGraph__tooltip").style("opacity",0)}),p.append("text").attr("x",.5*-a.left).attr("y",.5*-a.top).text("# of new repositories").style("font-size","small");k.m(".LineGraph__container").append("div").style("position","absolute").style("top","".concat(.5*o,"px")).style("left","".concat(.5*r,"px")).style("border","1px solid grey").style("background-color","white").style("opacity",0).attr("class","LineGraph__tooltip")}}]),t}(o.Component),R=function(e){var t=e.handleSubmit,n=e.handleChangeFromMonth,a=e.handleChangeFromYear,o=e.handleChangeToMonth,i=e.handleChangeToYear,s=e.handleChangeLanguage,c=e.keyReceived,l=e.fromMonth,u=e.fromYear,h=e.toMonth,p=e.toYear,d=e.language;return r.a.createElement("form",{onSubmit:t},r.a.createElement("div",{className:"from"},"From:",r.a.createElement("select",{value:l,onChange:n},T.map(function(e,t){return r.a.createElement("option",{key:"fromMonth-".concat(t),value:e},e)})),r.a.createElement("select",{value:u,onChange:a},O.map(function(e,t){return r.a.createElement("option",{key:"fromYear-".concat(t),value:e},e)}))),r.a.createElement("div",{className:"to"},"To:",r.a.createElement("select",{value:h,onChange:o},T.map(function(e,t){return r.a.createElement("option",{key:"toMonth-".concat(t),value:e},e)})),r.a.createElement("select",{value:p,onChange:i},O.map(function(e,t){return r.a.createElement("option",{key:"toYear-".concat(t),value:e},e)}))),r.a.createElement("div",{className:"language"},"Language:",r.a.createElement("input",{placeholder:"Enter desired language",value:d,onChange:s})),r.a.createElement("input",{type:"submit",value:"Submit",disabled:!c}))},N=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(m.a)(this,Object(f.a)(t).call(this,e))).handleChangeFromMonth=function(e){n.setState({fromMonth:e.target.value})},n.handleChangeFromYear=function(e){n.setState({fromYear:e.target.value})},n.handleChangeToMonth=function(e){n.setState({toMonth:e.target.value})},n.handleChangeToYear=function(e){n.setState({toYear:e.target.value})},n.handleChangeLanguage=function(e){n.setState({language:e.target.value})},n.handleSubmit=function(e){e.preventDefault(),n.setState({submit:!0})},n.state={fromMonth:"jan",fromYear:"10",toMonth:"mar",toYear:"19",language:"JavaScript",submit:!1},n}return Object(v.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"NewRepos__container"},r.a.createElement(R,{handleSubmit:this.handleSubmit,handleChangeFromMonth:this.handleChangeFromMonth,handleChangeFromYear:this.handleChangeFromYear,handleChangeToMonth:this.handleChangeToMonth,handleChangeToYear:this.handleChangeToYear,handleChangeLanguage:this.handleChangeLanguage,keyReceived:this.props.keyReceived,fromMonth:this.state.fromMonth,fromYear:this.state.fromYear,toMonth:this.state.toMonth,toYear:this.state.toYear,language:this.state.language}),!this.state.submit&&!localStorage.getItem("isLoggedIn")&&r.a.createElement("h4",{className:"NewRepos__Message"},"Monthly New Repo Trend: Please login to access visualisations"),!this.state.submit&&localStorage.getItem("isLoggedIn")&&r.a.createElement("h4",{className:"NewRepos__Message"},"Monthly New Repo Trend: Select your request using the dropdowns"),this.state.submit&&r.a.createElement(c.b,{query:(e=this.state.fromMonth+this.state.fromYear,t=this.state.toMonth+this.state.toYear,n=this.state.language,a=b.a,a(C(),M(e,t,n)))},function(e){var t=e.loading,n=e.error,a=e.data;return t?r.a.createElement("div",{className:"NewRepos__LoaderBox"},r.a.createElement("div",{className:"loader"})):n?r.a.createElement("div",{className:"NewRepos__Message"},"Error, please see below. In the event of a network error you may need to delete local storage/cookies/cache and refresh page to login again",r.a.createElement("br",null),"$",n.toString()):(console.log("Operation quota cost: ".concat(a.rateLimit.cost)),console.log("Quota remaining: ".concat(a.rateLimit.remaining)),console.log("Reset at: ".concat(a.rateLimit.resetAt)),console.log(Object.entries(a)),Object.entries(a).length>1?r.a.createElement(I,{data:a}):null)}));var e,t,n,a}}]),t}(o.Component),Y=function(e){function t(){return Object(d.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"TreeMap__container",style:{position:"relative"}})}},{key:"componentDidMount",value:function(){console.log("mounted"),this.props.data&&this.drawGraph(this.props.data)}},{key:"componentDidUpdate",value:function(e){console.log("updating"),this.props.data!==e.data&&(this.removeGraph(),this.drawGraph(this.props.data))}},{key:"removeGraph",value:function(){console.log("removing old graph"),k.n(".TreeMap__container > *").remove()}},{key:"drawGraph",value:function(e){var t=Object.entries(e).slice(2).map(function(e){return{name:e[0],value:e[1].repositoryCount}}),n=e.ALL.repositoryCount,a=Object.entries(e).reduce(function(e,t){return"ALL"!==t[0]&&"rateLimit"!==t[0]?e+t[1].repositoryCount:e},0);t.push({name:"All Other",value:n-a});var o={name:"Repositories",children:t},r=window.innerWidth>736?{top:0,right:0,bottom:0,left:0}:{top:10,right:10,bottom:10,left:10},i=(window.innerWidth,500-r.top-r.bottom),s=window.innerWidth>736?736-r.left-r.right:350-r.left-r.right,c=k.e(o);console.log(c),c.sum(function(e){return e.value}).sort(function(e,t){return t.height-e.height||t.value-e.value}),k.o().size([s,i]).paddingOuter(10).paddingInner(5)(c);var l=k.j().domain(c.leaves().map(function(e){return e.data.name})).range(k.l);console.log(c.leaves());var u=k.m(".TreeMap__container").append("svg").attr("width",s+r.left+r.right).attr("height",i+r.top+r.bottom).append("g").attr("transform","translate("+r.left+","+r.top+")").attr("class","TreeMap__canvas").selectAll("g").data(c.leaves()).enter().append("g").attr("transform",function(e){return"translate("+[e.x0,e.y0]+")"}).on("mouseover",h).on("mouseout",p);u.append("rect").attr("class","tile").attr("width",function(e){return e.x1-e.x0}).attr("height",function(e){return e.y1-e.y0}).attr("fill",function(e){return l(e.data.name)}).on("mouseover",h).on("mouseout",p),u.append("text").attr("dy","1em").attr("class","label").text(function(e){return e.data.name}).on("mouseover",h).on("mouseout",p),k.m(".TreeMap__container").append("div").style("position","absolute").style("border","1px solid grey").style("background-color","white").style("opacity",0).attr("class","TreeMap__tooltip");function h(e,t){k.m(this).style("cursor","pointer"),k.m(".TreeMap__tooltip").style("left",k.c.pageX+10+function(e,t){return 2*e>t?-.5*t:0}(k.c.pageX+10,s)+"px").style("top",k.c.pageY-800+function(e,t){return 2*e>t?-.5*t:0}(k.c.pageY-800,i)+"px").html("\n          <p>Language: ".concat(e.data.name,"</p>\n          <p>New Repos: ").concat(e.data.value,"</p>\n          <p>Proportion: ").concat(k.d(".0%")(e.data.value/n),"</p>\n        ")).style("padding","0 10px").transition().duration(750).style("opacity",1).style("z-index",100)}function p(e,t){k.m(".TreeMap__tooltip").transition().duration(750).style("opacity",0).style("z-index",-100)}}}]),t}(o.Component),G=function(e){var t=e.handleSubmit,n=e.handleChangeMonth,a=e.handleChangeYear,o=e.keyReceived,i=e.month,s=e.year;return r.a.createElement("form",{onSubmit:t},r.a.createElement("div",{className:"month"},"Period:",r.a.createElement("select",{value:i,onChange:n},T.map(function(e,t){return r.a.createElement("option",{key:"month-".concat(t),value:e},e)})),r.a.createElement("select",{value:s.slice(2),onChange:a},O.map(function(e,t){return r.a.createElement("option",{key:"year-".concat(t),value:e},e)}))),r.a.createElement("input",{type:"submit",value:"Submit",disabled:!o}))},P=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(m.a)(this,Object(f.a)(t).call(this,e))).handleChangeMonth=function(e){n.setState({month:e.target.value})},n.handleChangeYear=function(e){n.setState({year:"20".concat(e.target.value)})},n.handleSubmit=function(e){e.preventDefault(),n.setState({submit:!0})},n.state={month:"jan",year:"2010",submit:!1},n}return Object(v.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"Languages__container"},r.a.createElement(G,{handleSubmit:this.handleSubmit,handleChangeMonth:this.handleChangeMonth,handleChangeYear:this.handleChangeYear,keyReceived:this.props.keyReceived,month:this.state.month,year:this.state.year}),!this.state.submit&&!localStorage.getItem("isLoggedIn")&&r.a.createElement("h4",{className:"Languages__Message"},"Point-in-time View of Relative Language Popularity: Please login to access visualisations"),!this.state.submit&&localStorage.getItem("isLoggedIn")&&r.a.createElement("h4",{className:"Languages__Message"},"Point-in-time View of Relative Language Popularity: Select your request using the dropdowns"),this.state.submit&&r.a.createElement(c.b,{query:(e="".concat(this.state.year,"-").concat(L[T.indexOf(this.state.month)]),t=b.a,t(S(),e,j.reduce(function(t,n){return t+x(n,e)},"")))},function(e){var t=e.loading,n=e.error,a=e.data;return t?r.a.createElement("div",{className:"Languages__LoaderBox"},r.a.createElement("div",{className:"loader"})):n?r.a.createElement("div",{className:"Languages__Message"},"Error, please see below. ",r.a.createElement("br",null),"$",n.toString()):(console.log("Operation quota cost: ".concat(a.rateLimit.cost)),console.log("Quota remaining: ".concat(a.rateLimit.remaining)),console.log("Reset at: ".concat(a.rateLimit.resetAt)),console.log(Object.entries(a)),Object.entries(a).length>1?r.a.createElement(Y,{data:a}):null)}));var e,t}}]),t}(o.Component),D=(n(204),n(205),n(206),n(207),function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).handleAuthentication=function(e){var t=e.location;/access_token|id_token|error/.test(t.hash)&&a.props.auth.handleAuthentication(function(e){a.getAPIToken(e.idToken,function(e){a.props.setToken(e),a.setState({keyReceived:!0,loggingIn:!1})})})},a.getAPIToken=function(e,t){n(208)({method:"GET",url:"https://wt-f1d82d610072deeaf794b2ad8e84524c-0.sandbox.auth0-extend.com/authToken",headers:{authorization:"Bearer ".concat(e)}},function(e,n,a){if(e)throw new Error(e);t(a)})},a.state={loggingIn:!1,keyReceived:!1},a}return Object(v.a)(t,e),Object(g.a)(t,[{key:"login",value:function(){this.props.auth.login()}},{key:"logout",value:function(){this.props.auth.logout()}},{key:"componentDidMount",value:function(){var e=this,t=this.props.auth.renewSession;"true"===localStorage.getItem("isLoggedIn")?t(function(t){e.getAPIToken(t.idToken,function(t){e.props.setToken(t),e.setState({keyReceived:!0})})}):this.props.history.location.hash&&(this.setState({loggingIn:!0}),this.handleAuthentication(this.props.history))}},{key:"render",value:function(){var e=this.props.auth.isAuthenticated,t=this.state,n=t.loggingIn,a=t.keyReceived,o=e();return r.a.createElement("div",{className:"App__container"},r.a.createElement("h1",null,"GitHub Data Dashboard"),!o&&!n&&r.a.createElement("button",{id:"qsLoginBtn",className:"btn-margin App__loginBtn",onClick:this.login.bind(this)},"Log In With GitHub"),n&&r.a.createElement("p",{className:"loggingIn"},"Authenticating"),o&&!n&&r.a.createElement("div",null,r.a.createElement("span",null,"Logged in successfully"),r.a.createElement("button",{id:"qsLogoutBtn",className:"btn-margin App__logoutBtn",onClick:this.logout.bind(this)},"Logout")),r.a.createElement("h3",null,"Instructions once authorised: for each visualisation, select the desired parameters and click submit to fetch and visualise data"),r.a.createElement(N,{keyReceived:a}),r.a.createElement(P,{keyReceived:a}))}}]),t}(o.Component)),q=n(186),B=Object(q.a)(),F=n(185),W={domain:"dev-8-2xd3l4.eu.auth0.com",clientId:"xvOAhkUjsDBqDfFcPTaiwyf2Cn8gCQ7D",callbackUrl:"http://localhost:8080"},z=W,U=function(){function e(){Object(d.a)(this,e),this.auth0=new F.a.WebAuth({domain:z.domain,clientID:z.clientId,responseType:"token id_token",redirectUri:z.callbackUrl,scope:"openid"}),this.login=this.login.bind(this),this.logout=this.logout.bind(this),this.handleAuthentication=this.handleAuthentication.bind(this),this.isAuthenticated=this.isAuthenticated.bind(this),this.getAccessToken=this.getAccessToken.bind(this),this.getIdToken=this.getIdToken.bind(this),this.renewSession=this.renewSession.bind(this)}return Object(g.a)(e,[{key:"login",value:function(){this.auth0.authorize()}},{key:"handleAuthentication",value:function(e){var t=this;console.log("calling parse hash"),this.auth0.parseHash(function(n,a){a&&a.accessToken&&a.idToken?(t.setSession(a),e(a)):n&&(B.replace("/"),console.log(n),alert("Error: ".concat(n.error,". Check the console for further details.")))})}},{key:"getAccessToken",value:function(){return this.accessToken}},{key:"getIdToken",value:function(){return this.idToken}},{key:"setSession",value:function(e){localStorage.setItem("isLoggedIn","true");var t=1e3*e.expiresIn+(new Date).getTime();this.accessToken=e.accessToken,this.idToken=e.idToken,this.expiresAt=t,B.replace("/")}},{key:"renewSession",value:function(e){var t=this;this.auth0.checkSession({},function(n,a){a&&a.accessToken&&a.idToken?(t.setSession(a),e(a)):n&&(t.logout(),alert("Please login again after refreshing the page"),console.log(n),console.log("Auth.js renewSession: Could not get a new token (".concat(n.error,": ").concat(n.error_description,").")))})}},{key:"logout",value:function(){this.accessToken=null,this.idToken=null,this.expiresAt=0,localStorage.removeItem("isLoggedIn"),B.replace("/")}},{key:"isAuthenticated",value:function(){var e=this.expiresAt;return(new Date).getTime()<e}}]),e}();Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var J=new U,H=Object(h.a)({uri:"https://api.github.com/graphql"}),Q=null,$=Object(u.a)(function(e,t){var n=t.headers;return{headers:Object(a.a)({},n,{authorization:Q?"Bearer ".concat(Q):""})}}),V=new l.a({link:$.concat(H),cache:new p.a});s.a.render(r.a.createElement(c.a,{client:V},r.a.createElement(D,{history:B,auth:J,setToken:function(e){Q=e}})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[191,1,2]]]);
//# sourceMappingURL=main.3a46d728.chunk.js.map