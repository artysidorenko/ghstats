(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{183:function(e,t,n){e.exports=n(410)},189:function(e,t,n){},190:function(e,t,n){},211:function(e,t){},213:function(e,t){},245:function(e,t){},246:function(e,t){},315:function(e,t){},410:function(e,t,n){"use strict";n.r(t);var a=n(181),o=n(2),r=n.n(o),i=n(174),c=n.n(i),s=n(40),l=n(80),u=n(178),h=n(180),p=n(179),d=(n(189),n(24)),m=n(25),g=n(30),f=n(29),v=n(31),y=n(61),b=n.n(y),k=(n(190),n(79)),w=n(7),j=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"];function O(e,t){return new Date(parseInt("20".concat(t.slice(3))),e.indexOf(t.slice(0,3)),1)}var E=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],T=function(e){function t(){return Object(d.a)(this,t),Object(g.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"LineGraph__container",style:{position:"relative"}})}},{key:"componentDidMount",value:function(){console.log("mounted"),this.props.data&&this.drawGraph(this.props.data)}},{key:"componentDidUpdate",value:function(e){console.log("updating"),this.props.data!==e.data&&(this.removeGraph(),this.drawGraph(this.props.data))}},{key:"removeGraph",value:function(){console.log("removing old graph"),w.n(".LineGraph__container > *").remove()}},{key:"drawGraph",value:function(e){var t=Object.entries(e).slice(1),n=window.innerWidth>700?{top:50,right:50,bottom:50,left:75}:{top:25,right:25,bottom:25,left:35},a=(window.innerWidth,400-n.top-n.bottom),o=window.innerWidth>700?700-n.left-n.right:350-n.left-n.right,r=function(e,t,n,a){return{xScale:w.k().domain([O(j,e[0][0]),O(j,e[e.length-1][0])]).range([0,a]),yScale:w.i().domain([.95*w.h(e,function(e){return e[1][t]}),1.05*w.g(e,function(e){return e[1][t]})]).range([n,0])}}(t,"repositoryCount",a,o),i=r.xScale,c=r.yScale,s=function(e,t){return{xAxis:w.a(e),yAxis:w.b(t)}}(i,c),l=s.xAxis,u=s.yAxis,h=w.m(".LineGraph__container").append("svg").attr("width",o+n.left+n.right).attr("height",a+n.top+n.bottom).append("g").attr("transform","translate("+n.left+","+n.top+")").attr("class","LineGraph__canvas");h.append("g").attr("transform","translate(0,"+a+")").attr("class","LineGraph__xAxis").call(l).selectAll("text").attr("dy",".5em").attr("transform","rotate(315)").style("text-anchor","end"),h.append("g").attr("transform","translate(0,0)").attr("class","LineGraph__yAxis").call(u),h.append("path").datum(t).attr("class","LineGraph__line").attr("d",function(e,t,n,a){return w.f().x(function(e){return t(O(a,e[0]))}).y(function(t){return n(t[1][e])})}("repositoryCount",i,c,E)).style("fill","none").style("stroke","black"),h.selectAll("circle").data(t).enter().append("circle").attr("cy",function(e){return c(e[1].repositoryCount)}).attr("cx",function(e){return i(O(E,e[0]))}).attr("r",4).attr("fill","black").on("mouseover",function(e,t){w.m(this).style("cursor","pointer"),w.m(".LineGraph__tooltip").style("opacity",1).style("top","".concat(c(e[1].repositoryCount)+n.top,"px")).style("left","".concat(i(O(E,e[0]))+2*n.left,"px")).style("padding","0 10px").html("\n          <p>Period: ".concat(e[0][0].toUpperCase()+e[0].slice(1,3),"-").concat(e[0].slice(3,5),"</p>\n          <p>New Repos: ").concat(w.d(",")(e[1].repositoryCount),"</p>\n        "))}).on("mouseout",function(e,t){w.m(".LineGraph__tooltip").style("opacity",0)}),h.append("text").attr("x",.5*-n.left).attr("y",.5*-n.top).text("# of new repositories").style("font-size","small");w.m(".LineGraph__container").append("div").style("position","absolute").style("top","".concat(.5*a,"px")).style("left","".concat(.5*o,"px")).style("border","1px solid grey").style("background-color","white").style("opacity",0).attr("class","LineGraph__tooltip")}}]),t}(o.Component);function x(){var e=Object(k.a)(["\n  query {\n  rateLimit {\n    cost\n    remaining\n    resetAt\n  \n  }\n  ","\n}\n"]);return x=function(){return e},e}var _=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(g.a)(this,Object(f.a)(t).call(this,e))).handleChangeFromMonth=function(e){n.setState({fromMonth:e.target.value})},n.handleChangeFromYear=function(e){n.setState({fromYear:e.target.value})},n.handleChangeToMonth=function(e){n.setState({toMonth:e.target.value})},n.handleChangeToYear=function(e){n.setState({toYear:e.target.value})},n.handleChangeLanguage=function(e){n.setState({language:e.target.value})},n.handleSubmit=function(e){e.preventDefault(),n.setState({submit:!0})},n.state={fromMonth:"jan",fromYear:"10",toMonth:"mar",toYear:"19",language:"JavaScript",submit:!1},n}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"NewRepos__container"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("label",null,"From:",r.a.createElement("select",{value:this.state.fromMonth,onChange:this.handleChangeFromMonth},C.map(function(e,t){return r.a.createElement("option",{key:t,value:e},e)})),r.a.createElement("select",{value:this.state.fromYear,onChange:this.handleChangeFromYear},S.map(function(e,t){return r.a.createElement("option",{key:t,value:e},e)}))),r.a.createElement("label",null,"To:",r.a.createElement("select",{value:this.state.toMonth,onChange:this.handleChangeToMonth},C.map(function(e,t){return r.a.createElement("option",{key:t,value:e},e)})),r.a.createElement("select",{value:this.state.toYear,onChange:this.handleChangeToYear},S.map(function(e,t){return r.a.createElement("option",{key:t,value:e},e)}))),r.a.createElement("label",null,"Language:",r.a.createElement("input",{placeholder:"Enter desired language",value:this.state.language,onChange:this.handleChangeLanguage})),r.a.createElement("input",{type:"submit",value:"Submit",disabled:!this.props.keyReceived})),this.state.submit&&r.a.createElement(s.b,{query:L(this.state.fromMonth+this.state.fromYear,this.state.toMonth+this.state.toYear,this.state.language)},function(e){var t=e.loading,n=e.error,a=e.data;return t?r.a.createElement("span",null,"Loading"):n?r.a.createElement("div",null,"Error, please see below. ",r.a.createElement("br",null),"$",n.toString()):(console.log("Operation quota cost: ".concat(a.rateLimit.cost)),console.log("Quota remaining: ".concat(a.rateLimit.remaining)),console.log("Reset at: ".concat(a.rateLimit.resetAt)),console.log(Object.entries(a)),Object.entries(a).length>1?r.a.createElement(T,{data:a}):null)}))}}]),t}(o.Component),C=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],S=["10","11","12","13","14","15","16","17","18","19"],A=["01","02","03","04","05","06","07","08","09","10","11","12"],L=function(e,t,n){return b()(x(),I(e,t,n))},I=function(e,t,n){for(var a="",o=e,r=0;o!==t&&r<120;)a+="".concat(M(o.slice(0,3),"20".concat(o.slice(3)),n)),o="dec"===o.slice(0,3)?"jan".concat(parseInt(o.slice(3))+1):"".concat(C[C.indexOf(o.slice(0,3))+1]).concat(o.slice(3)),r++;return a},M=function(e,t,n){return"\n".concat(e).concat(t.slice(2),': search (\n    type: REPOSITORY\n    query: "created:').concat(t,"-").concat(A[C.indexOf(e)]," language:").concat(n,'"\n  ) {\n    repositoryCount\n  } \n')},G=_,R=function(e){function t(){return Object(d.a)(this,t),Object(g.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"TreeMap__container",style:{position:"relative"}})}},{key:"componentDidMount",value:function(){console.log("mounted"),this.props.data&&this.drawGraph(this.props.data)}},{key:"componentDidUpdate",value:function(e){console.log("updating"),this.props.data!==e.data&&(this.removeGraph(),this.drawGraph(this.props.data))}},{key:"removeGraph",value:function(){console.log("removing old graph"),w.n(".TreeMap__container > *").remove()}},{key:"drawGraph",value:function(e){var t=Object.entries(e).slice(2).map(function(e){return{name:e[0],value:e[1].repositoryCount}}),n=e.ALL.repositoryCount,a=Object.entries(e).reduce(function(e,t){return"ALL"!==t[0]&&"rateLimit"!==t[0]?e+t[1].repositoryCount:e},0);t.push({name:"All Other",value:n-a});var o={name:"Repositories",children:t},r=window.innerWidth>700?{top:0,right:0,bottom:0,left:0}:{top:10,right:10,bottom:10,left:10},i=(window.innerWidth,500-r.top-r.bottom),c=window.innerWidth>700?700-r.left-r.right:350-r.left-r.right,s=w.e(o);console.log(s),s.sum(function(e){return e.value}).sort(function(e,t){return t.height-e.height||t.value-e.value}),w.o().size([c,i]).paddingOuter(10).paddingInner(5)(s);var l=w.j().domain(s.leaves().map(function(e){return e.data.name})).range(w.l);console.log(s.leaves());var u=w.m(".TreeMap__container").append("svg").attr("width",c+r.left+r.right).attr("height",i+r.top+r.bottom).append("g").attr("transform","translate("+r.left+","+r.top+")").attr("class","TreeMap__canvas").selectAll("g").data(s.leaves()).enter().append("g").attr("transform",function(e){return"translate("+[e.x0,e.y0]+")"}).on("mouseover",h).on("mouseout",p);u.append("rect").attr("class","tile").attr("width",function(e){return e.x1-e.x0}).attr("height",function(e){return e.y1-e.y0}).attr("fill",function(e){return l(e.data.name)}).on("mouseover",h).on("mouseout",p),u.append("text").attr("dy","1em").attr("class","label").text(function(e){return e.data.name}).on("mouseover",h).on("mouseout",p),w.m(".TreeMap__container").append("div").style("position","absolute").style("border","1px solid grey").style("background-color","white").style("opacity",0).attr("class","TreeMap__tooltip");function h(e,t){w.m(this).style("cursor","pointer"),w.m(".TreeMap__tooltip").style("left",w.c.pageX+10+"px").style("top",w.c.pageY-800+"px").html("\n          <p>Language: ".concat(e.data.name,"</p>\n          <p>New Repos: ").concat(e.data.value,"</p>\n          <p>Proportion: ").concat(w.d(".0%")(e.data.value/n),"</p>\n        ")).style("padding","0 10px").transition().duration(750).style("opacity",1).style("z-index",100)}function p(e,t){w.m(".TreeMap__tooltip").transition().duration(750).style("opacity",0).style("z-index",-100)}}}]),t}(o.Component);function Y(){var e=Object(k.a)(['\n  query {\n  rateLimit {\n    cost\n    remaining\n    resetAt\n  }\n  ALL: search (\n    type: REPOSITORY\n    query: "created:','"\n  ) {\n    repositoryCount\n  }\n  ',"\n  }\n"]);return Y=function(){return e},e}var D=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(g.a)(this,Object(f.a)(t).call(this,e))).handleChangeMonth=function(e){n.setState({month:e.target.value})},n.handleChangeYear=function(e){n.setState({year:"20".concat(e.target.value)})},n.handleSubmit=function(e){e.preventDefault(),n.setState({submit:!0})},n.state={month:"jan",year:"2010",submit:!1},n}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"Languages__container"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("label",null,"Period:",r.a.createElement("select",{value:this.state.month,onChange:this.handleChangeMonth},P.map(function(e,t){return r.a.createElement("option",{key:t,value:e},e)})),r.a.createElement("select",{value:this.state.year.slice(2),onChange:this.handleChangeYear},q.map(function(e,t){return r.a.createElement("option",{key:t,value:e},e)}))),r.a.createElement("input",{type:"submit",value:"Submit",disabled:!this.props.keyReceived})),this.state.submit&&r.a.createElement(s.b,{query:W("".concat(this.state.year,"-").concat(N[P.indexOf(this.state.month)]))},function(e){var t=e.loading,n=e.error,a=e.data;return t?r.a.createElement("span",null,"Loading"):n?r.a.createElement("div",null,"Error, please see below. ",r.a.createElement("br",null),"$",n.toString()):(console.log("Operation quota cost: ".concat(a.rateLimit.cost)),console.log("Quota remaining: ".concat(a.rateLimit.remaining)),console.log("Reset at: ".concat(a.rateLimit.resetAt)),console.log(Object.entries(a)),Object.entries(a).length>1?r.a.createElement(R,{data:a}):null)}))}}]),t}(o.Component),P=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],q=["10","11","12","13","14","15","16","17","18","19"],N=["01","02","03","04","05","06","07","08","09","10","11","12"],U=["Javascript","Java","Python","CSS","PHP","Ruby","C++","C","Shell","C#","HTML","Go","Typescript","Swift","Scala"],W=function(e){return b()(Y(),e,U.reduce(function(t,n){return t+z(n,e)},""))},z=function(e,t){return"\n".concat(e.replace("++","plusplus").replace("#","sharp"),': search (\n    type: REPOSITORY\n    query: "created:').concat(t," language:").concat(e,'"\n  ) {\n    repositoryCount\n  }\n')},B=D,F=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(g.a)(this,Object(f.a)(t).call(this,e))).handleAuthentication=function(e){var t=e.location;/access_token|id_token|error/.test(t.hash)&&a.props.auth.handleAuthentication(function(e){a.getAPIToken(e.idToken,function(e){a.props.setToken(e),a.setState({keyReceived:!0})})})},a.getAPIToken=function(e,t){n(197)({method:"GET",url:"https://wt-f1d82d610072deeaf794b2ad8e84524c-0.sandbox.auth0-extend.com/authToken",headers:{authorization:"Bearer ".concat(e)}},function(e,n,a){if(e)throw new Error(e);t(a)})},a.state={keyReceived:!1},a}return Object(v.a)(t,e),Object(m.a)(t,[{key:"login",value:function(){this.props.auth.login()}},{key:"logout",value:function(){this.props.auth.logout()}},{key:"componentDidMount",value:function(){var e=this,t=this.props.auth.renewSession;"true"===localStorage.getItem("isLoggedIn")?t(function(t){e.getAPIToken(t.idToken,function(t){e.props.setToken(t),e.setState({keyReceived:!0})})}):this.props.history.location.hash&&this.handleAuthentication(this.props.history)}},{key:"render",value:function(){var e=(0,this.props.auth.isAuthenticated)();return r.a.createElement("div",{className:"App__container"},r.a.createElement("h1",null,"GitHub Data Dashboard"),!e&&r.a.createElement("button",{id:"qsLoginBtn",className:"btn-margin",onClick:this.login.bind(this)},"Log In To Use The GitHub API"),e&&r.a.createElement("h2",null,"Logged in!"),r.a.createElement("h3",null,"Instructions once authorised: for each visualisation, select the desired parameters and click submit to fetch and visualise data"),r.a.createElement(G,{keyReceived:this.state.keyReceived}),r.a.createElement(B,{keyReceived:this.state.keyReceived}))}}]),t}(o.Component),H=n(177),J=Object(H.a)(),Q=n(110),$={domain:"dev-8-2xd3l4.eu.auth0.com",clientId:"xvOAhkUjsDBqDfFcPTaiwyf2Cn8gCQ7D",callbackUrl:"http://localhost:3000"},X=$,K=function(){function e(){Object(d.a)(this,e),this.auth0=new Q.a.WebAuth({domain:X.domain,clientID:X.clientId,responseType:"token id_token",redirectUri:X.callbackUrl,scope:"openid"}),this.login=this.login.bind(this),this.logout=this.logout.bind(this),this.handleAuthentication=this.handleAuthentication.bind(this),this.isAuthenticated=this.isAuthenticated.bind(this),this.getAccessToken=this.getAccessToken.bind(this),this.getIdToken=this.getIdToken.bind(this),this.renewSession=this.renewSession.bind(this)}return Object(m.a)(e,[{key:"login",value:function(){console.log(Q.a.redirectUri),this.auth0.authorize()}},{key:"handleAuthentication",value:function(e){var t=this;console.log("calling parse hash"),this.auth0.parseHash(function(n,a){a&&a.accessToken&&a.idToken?(t.setSession(a),e(a)):n&&(J.replace("/"),console.log(n),alert("Error: ".concat(n.error,". Check the console for further details.")))})}},{key:"getAccessToken",value:function(){return this.accessToken}},{key:"getIdToken",value:function(){return this.idToken}},{key:"setSession",value:function(e){localStorage.setItem("isLoggedIn","true");var t=1e3*e.expiresIn+(new Date).getTime();this.accessToken=e.accessToken,this.idToken=e.idToken,this.expiresAt=t,J.replace("/")}},{key:"renewSession",value:function(e){var t=this;this.auth0.checkSession({},function(n,a){a&&a.accessToken&&a.idToken?(t.setSession(a),e(a)):n&&(t.logout(),console.log(n),alert("Could not get a new token (".concat(n.error,": ").concat(n.error_description,").")))})}},{key:"logout",value:function(){this.accessToken=null,this.idToken=null,this.expiresAt=0,localStorage.removeItem("isLoggedIn"),J.replace("/")}},{key:"isAuthenticated",value:function(){var e=this.expiresAt;return(new Date).getTime()<e}}]),e}();Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var V=new K,Z=Object(h.a)({uri:"https://api.github.com/graphql"}),ee=null,te=Object(u.a)(function(e,t){var n=t.headers;return{headers:Object(a.a)({},n,{authorization:ee?"Bearer ".concat(ee):""})}}),ne=new l.a({link:te.concat(Z),cache:new p.a});c.a.render(r.a.createElement(s.a,{client:ne},r.a.createElement(F,{history:J,auth:V,setToken:function(e){ee=e}})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[183,1,2]]]);
//# sourceMappingURL=main.16c256f4.chunk.js.map