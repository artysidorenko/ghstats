{"version":3,"sources":["utils/d3helpers.js","utils/queryHelpers.js","components/visualisations/LineGraph.js","components/forms/PeriodForm.js","components/queries/MonthlyNewRepos.js","components/visualisations/TreeMap.js","components/forms/MonthForm.js","components/queries/Languages.js","components/App.js","history.js","auth/auth0-variables.js","auth/Auth.js","serviceWorker.js","index.js"],"names":["monthArray","parseMonth","datapoint","Date","parseInt","concat","slice","indexOf","monthsWord","years","monthsDigit","languages","addLanguageNode","language","period","replace","generateMonths","from","to","output","current","limit","addMonthNode","month","year","LineGraph","react_default","a","createElement","className","style","position","console","log","this","props","data","drawGraph","prevProps","removeGraph","d3","remove","d","window","innerWidth","toString","dataObject","_this","dataArray","Object","entries","margin","top","right","bottom","left","height","width","_generateScales","dataField","xScale","domain","length","range","yScale","generateScales","_generateAxes","xAxis","yAxis","generateAxes","svg","append","attr","call","tickFormat","formatMobile","selectAll","datum","x","y","generateLine","enter","repositoryCount","on","i","shiftToolTipTop","shiftToolTipLeft","html","toUpperCase","text","Component","PeriodForm","_ref","handleSubmit","handleChangeFromMonth","handleChangeFromYear","handleChangeToMonth","handleChangeToYear","handleChangeLanguage","keyReceived","fromMonth","fromYear","toMonth","toYear","onSubmit","value","onChange","map","elem","index","key","placeholder","type","disabled","NewRepos","classCallCheck","possibleConstructorReturn","getPrototypeOf","event","setState","target","preventDefault","submit","state","forms_PeriodForm","localStorage","getItem","react_apollo_esm","query","gql","_templateObject2","loading","error","rateLimit","cost","remaining","resetAt","visualisations_LineGraph","TreeMap","name","totalCount","ALL","languageCount","reduce","total","push","dataHierarchy","children","root","sum","sort","b","size","paddingOuter","paddingInner","treemapLayout","color","leaves","e","node","x0","y0","handleMouseOver","handleMouseOut","x1","y1","pageX","pageY","transition","duration","MonthForm","handleChangeMonth","handleChangeYear","Languages","forms_MonthForm","_templateObject","visualisations_TreeMap","App","handleAuthentication","location","test","hash","auth","authResult","getAPIToken","idToken","body","setToken","loggingIn","jwt","callback","require","request","method","url","headers","authorization","response","Error","login","logout","_this2","renewSession","history","isAuthenticated","_this$state","authCheck","id","onClick","bind","MonthlyNewRepos","queries_Languages","createBrowserHistory","AUTH_CONFIG","clientId","Auth","auth0","WebAuth","clientID","responseType","redirectUri","callbackUrl","scope","getAccessToken","getIdToken","authorize","parseHash","err","accessToken","setSession","alert","setItem","expiresAt","expiresIn","getTime","checkSession","error_description","removeItem","Boolean","hostname","match","httpLink","createHttpLink","uri","token","authLink","setContext","_","objectSpread","client","ApolloClient","link","cache","InMemoryCache","ReactDOM","render","components_App","githubAccess","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.3a46d728.chunk.js","sourcesContent":["import * as d3 from \"d3\";\n\nconst monthArray = ['jan', 'feb', 'mar', 'apr', 'may', 'jun', 'jul', 'aug', 'sep', 'oct', 'nov', 'dec']\n\nexport function parseMonth (monthArray, datapoint) {\n  return new Date(parseInt(`20${datapoint.slice(3)}`), monthArray.indexOf(datapoint.slice(0, 3)), 1)\n}\n\nexport function generateScales (dataArray, dataField, height, width) {\n  const xScale = d3.scaleTime()\n    .domain([\n      parseMonth(monthArray, dataArray[0][0]),\n      parseMonth(monthArray, dataArray[dataArray.length-1][0])\n    ])\n    .range([0, width])\n  const yScale = d3.scaleLinear()\n    .domain([\n      d3.min(dataArray, (d) => d[1][dataField]) * 0.95,\n      d3.max(dataArray, (d) => d[1][dataField]) * 1.05\n    ])\n    .range([height, 0]);\n  return { xScale, yScale }\n}\n\nexport function generateAxes (xScale, yScale) {\n  const xAxis = d3.axisBottom(xScale)\n  const yAxis = d3.axisLeft(yScale)\n  return { xAxis, yAxis }\n}\n\nexport function generateLine (dataField, xScale, yScale, monthArray) {\n  const line = d3.line()\n    .x((d) => xScale(parseMonth(monthArray, d[0])))\n    .y((d) => yScale(d[1][dataField]))\n  return line\n}\n\n// note: target cannot be a variable/object in node/React where there is no window.document context\nexport function generateContainer (target, position, className) {\n  d3.select(target)\n    .append('g')\n    .attr('x', position.left)\n    .attr('y', position.top)\n    .attr('class', className)\n}\n\nexport function generateText (target, position, text, className) {\n  d3.select(target)\n    .append('text')\n    .attr('x', position.left)\n    .attr('y', position.top)\n    .text(text)\n    .attr('class', className)\n}\n\nexport function generateRect (target, position, dimensions, color, className) {\n  d3.select(target)\n    .append('rect')\n    .attr('x', position.left)\n    .attr('y', position.top)\n    .attr('width', dimensions.width)\n    .attr('height', dimensions.height)\n    .attr('fill', color.fill)\n    .attr('stroke', color.border)\n    .attr('class', className)\n}","export const monthsWord = [\n  'jan',\n  'feb',\n  'mar',\n  'apr',\n  'may',\n  'jun',\n  'jul',\n  'aug',\n  'sep',\n  'oct',\n  'nov',\n  'dec'\n]\n\nexport const years = ['10', '11', '12', '13', '14', '15', '16', '17', '18', '19',\n]\n\nexport const monthsDigit = [\n  '01',\n  '02',\n  '03',\n  '04',\n  '05',\n  '06',\n  '07',\n  '08',\n  '09',\n  '10',\n  '11',\n  '12'\n]\n\nexport const languages = ['Javascript', 'Java', 'Python', 'CSS', 'PHP', 'Ruby', 'C++', 'C', 'Shell', 'C#', 'HTML', 'Go', 'Typescript',\n  'Swift', 'Scala'\n]\n\n// period in format YYYY-MM\nexport const LANGUAGE_REPOS_QUERY = (period, gql) => gql`\n  query {\n  rateLimit {\n    cost\n    remaining\n    resetAt\n  }\n  ALL: search (\n    type: REPOSITORY\n    query: \"created:${period}\"\n  ) {\n    repositoryCount\n  }\n  ${languages.reduce((total, elem) => total + addLanguageNode(elem, period), '')}\n  }\n`\n\nexport const addLanguageNode = (language, period) => `\n${language.replace('++', 'plusplus').replace('#', 'sharp')}: search (\n    type: REPOSITORY\n    query: \"created:${period} language:${language}\"\n  ) {\n    repositoryCount\n  }\n`\n\nexport const NEW_REPOS_QUERY = (from, to, language, gql) => gql`\n  query {\n  rateLimit {\n    cost\n    remaining\n    resetAt\n  \n  }\n  ${generateMonths(from, to, language)}\n}\n`\nexport const generateMonths = (from, to, language) => {\n  let output = ``\n  let current = from\n  let limit = 0\n  while (current !== to && limit < 120) {\n    // add node to GQL query\n    output += `${addMonthNode(current.slice(0, 3), `20${current.slice(3)}`, language)}`\n    // increment year if required\n    if (current.slice(0, 3) === 'dec') {\n      current = `jan${parseInt(current.slice(3)) + 1}`\n    }\n    // otherwise increment month\n    else {\n      current = `${monthsWord[monthsWord.indexOf(current.slice(0, 3)) + 1]}${current.slice(3)}`\n    }\n    limit++\n  }\n  return output\n}\n\nexport const addMonthNode = (month, year, language) =>\n  `\n${month}${year.slice(2)}: search (\n    type: REPOSITORY\n    query: \"created:${year}-${monthsDigit[monthsWord.indexOf(month)]} language:${language}\"\n  ) {\n    repositoryCount\n  } \n`","import React, { Component } from 'react'\nimport * as d3 from \"d3\"\nimport { generateScales, generateAxes, generateLine, parseMonth, generateContainer, generateText, generateRect } from \"../../utils/d3helpers\"\nimport { monthsWord as monthArray } from '../../utils/queryHelpers'\n\nclass LineGraph extends Component {\n\n  render() {\n    return <div className=\"LineGraph__container\" style={{position: 'relative'}}></div>\n  }\n  componentDidMount() {\n    console.log('mounted')\n    if (this.props.data) this.drawGraph(this.props.data)\n  }\n  componentDidUpdate(prevProps) {\n    console.log('updating')\n    if (this.props.data !== prevProps.data) {\n      this.removeGraph()\n      this.drawGraph(this.props.data)\n    }\n  }\n\n  removeGraph() {\n    console.log('removing old graph')\n    d3.selectAll(\".LineGraph__container > *\").remove();\n  }\n\n  // in case of mobile, replace full month text with 3 letter abbreviation\n  formatMobile(d) {\n    if (window.innerWidth < 736) {\n      const month = d.toString().slice(4, 7)\n      if (month === 'Jan') {\n        return d.toString().slice(11, 15)\n      }\n      return d.toString().slice(4, 7)\n    }\n    return d\n  }\n\n  drawGraph(dataObject) {\n\n    // Get data\n    const dataArray = Object.entries(dataObject).slice(1)\n\n    // Set visual dimensions and margin\n\n    const margin = window.innerWidth > 736 ? { top: 50, right: 50, bottom: 50, left: 75 } : { top: 25, right: 25, bottom: 25, left: 50 }\n    const height = window.innerWidth > 736 ? 400 - margin.top - margin.bottom : 400 - margin.top - margin.bottom\n    const width = window.innerWidth > 736 ? 736 - margin.left - margin.right : 350 - margin.left - margin.right\n\n    // D3 - Generate scale and axes\n    const { xScale, yScale } = generateScales(dataArray, 'repositoryCount', height, width)\n    const { xAxis, yAxis } = generateAxes(xScale, yScale)\n\n    // Render SVG container\n    const svg = d3.select(\".LineGraph__container\")\n                  .append(\"svg\")\n                  .attr(\"width\", width + margin.left + margin.right)\n                  .attr(\"height\", height + margin.top + margin.bottom)\n                  // no border for now .style(\"border\", \"solid 1px black\")\n                  .append(\"g\")\n                  .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\")\n                  .attr(\"class\", \"LineGraph__canvas\")\n\n    // Append X and Y axes\n    svg.append(\"g\")\n      .attr(\"transform\", \"translate(0,\" + height + \")\")\n      .attr(\"class\", \"LineGraph__xAxis\")\n      .call(xAxis.tickFormat(d => this.formatMobile(d)))\n    // Rotate x-axis labels so months are all visible\n    .selectAll(\"text\")\n      .attr(\"dy\", \".5em\")\n      .attr(\"transform\", \"rotate(315)\")\n      .style(\"text-anchor\", \"end\");\n\n    svg.append(\"g\")\n      .attr(\"transform\", \"translate(0,0)\")\n      .attr(\"class\", \"LineGraph__yAxis\")\n      .call(yAxis)\n\n    // Append Line graph\n    svg.append(\"path\")\n      .datum(dataArray)\n      .attr(\"class\", \"LineGraph__line\")\n      .attr(\"d\", generateLine('repositoryCount', xScale, yScale, monthArray))\n      .style(\"fill\", \"none\")\n      .style(\"stroke\", \"black\")\n\n    // Add scatter points (for tooltip)\n    svg.selectAll('circle')\n      .data(dataArray)\n      .enter()\n      .append('circle')\n      .attr('cy', d => yScale(d[1].repositoryCount))\n      .attr('cx', d => xScale(parseMonth(monthArray, d[0])))\n      .attr('r', 4)\n      .attr('fill', 'black')\n      .on(\"mouseover\", handleMouseOver)\n      .on(\"mouseout\", handleMouseOut);\n\n    // Add y-axis label\n    svg.append('text')\n      .attr('x', -margin.left * 0.5)\n      .attr('y', -margin.top * 0.5)\n      .text('# of new repositories')\n      .style('font-size', 'small')\n\n    // generate tooltip\n    const tootip = d3.select('.LineGraph__container').append('div')\n      .style('position', 'absolute')\n      .style('top', `${0.5 * height}px`)\n      .style('left', `${0.5 * width}px`)\n      .style('border', '1px solid grey')\n      .style('background-color', 'white')\n      .style('opacity', 0)\n      .attr('class', 'LineGraph__tooltip')\n\n\n    function handleMouseOver (d, i) {\n      d3.select(this).style('cursor', 'pointer')\n      d3.select('.LineGraph__tooltip')\n        .style('opacity', 1)\n        .style('top', `${\n          yScale(d[1].repositoryCount) + margin.top +\n            shiftToolTipTop(yScale(d[1].repositoryCount) + margin.top, height)\n          }px`)\n        .style('left', `${xScale(parseMonth(monthArray, d[0])) + 2 * margin.left + \n            shiftToolTipLeft(xScale(parseMonth(monthArray, d[0])) + 2 * margin.left, width)\n          }px`)\n        .style('padding', '0 10px')\n        .html(`\n          <p>Period: ${d[0][0].toUpperCase() + d[0].slice(1, 3)}-${d[0].slice(3, 5)}</p>\n          <p>New Repos: ${d3.format(\",\")(d[1].repositoryCount)}</p>\n        `)\n    }\n\n    function handleMouseOut (d, i) {\n      d3.select('.LineGraph__tooltip')\n        .style('opacity', 0)\n    }\n\n    // Mobile-friendly tooltip offsets to prevent going off-screen\n    function shiftToolTipTop (top, height) {\n      if (2 * top > height) return -0.5 * height\n      return 0\n    }\n    function shiftToolTipLeft (left, width) {\n      if (2 * left > width) return -0.5 * width\n      return 0\n    }\n  }  \n}\n\nexport default LineGraph;\n\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { monthsWord, years } from '../../utils/queryHelpers'\n\nconst PeriodForm = ({\n  handleSubmit,\n  handleChangeFromMonth,\n  handleChangeFromYear,\n  handleChangeToMonth,\n  handleChangeToYear,\n  handleChangeLanguage,\n  keyReceived,\n  fromMonth,\n  fromYear,\n  toMonth,\n  toYear,\n  language\n}) => (\n  <form onSubmit={handleSubmit}>\n    <div className=\"from\">\n      From:\n          <select value={fromMonth} onChange={handleChangeFromMonth}>\n        {monthsWord.map((elem, index) =>\n          <option key={`fromMonth-${index}`} value={elem}>\n            {elem}\n          </option>\n        )}\n      </select>\n      <select value={fromYear} onChange={handleChangeFromYear}>\n        {years.map((elem, index) =>\n          <option key={`fromYear-${index}`} value={elem}>\n            {elem}\n          </option>\n        )}\n      </select>\n    </div>\n      <div className=\"to\">\n      To:\n          <select value={toMonth} onChange={handleChangeToMonth}>\n        {monthsWord.map((elem, index) =>\n          <option key={`toMonth-${index}`} value={elem}>\n            {elem}\n          </option>\n        )}\n      </select>\n      <select value={toYear} onChange={handleChangeToYear}>\n        {years.map((elem, index) =>\n          <option key={`toYear-${index}`} value={elem}>\n            {elem}\n          </option>\n        )}\n      </select>\n    </div>\n    <div className=\"language\">\n      Language:\n          <input placeholder=\"Enter desired language\" value={language} onChange={handleChangeLanguage} />\n    </div>\n    <input type=\"submit\" value=\"Submit\" disabled={!keyReceived} />\n  </form>\n)\n\nPeriodForm.propTypes = {\n  handleSubmit: PropTypes.func.isRequired,\n  handleChangeFromMonth: PropTypes.func.isRequired,\n  handleChangeFromYear: PropTypes.func.isRequired,\n  handleChangeToMonth: PropTypes.func.isRequired,\n  handleChangeToYear: PropTypes.func.isRequired,\n  handleChangeLanguage: PropTypes.func.isRequired,\n  keyReceived: PropTypes.bool.isRequired,\n  fromMonth: PropTypes.string.isRequired,\n  fromYear: PropTypes.string.isRequired,\n  toMonth: PropTypes.string.isRequired,\n  toYear: PropTypes.string.isRequired,\n  language: PropTypes.string.isRequired\n}\n\nexport default PeriodForm","import React, { Component } from 'react';\nimport { Query } from 'react-apollo'\nimport gql from 'graphql-tag'\nimport LineGraph from '../visualisations/LineGraph'\nimport PeriodForm from '../forms/PeriodForm'\nimport { NEW_REPOS_QUERY } from '../../utils/queryHelpers'\n\nclass NewRepos extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      fromMonth: 'jan',\n      fromYear: '10',\n      toMonth: 'mar',\n      toYear: '19',\n      language: 'JavaScript',\n      submit: false\n    }\n  }\n\n  handleChangeFromMonth = (event) => {\n    this.setState({ fromMonth: event.target.value })\n  }\n\n  handleChangeFromYear = (event) => {\n    this.setState({ fromYear: event.target.value })\n  }\n\n  handleChangeToMonth = (event) => {\n    this.setState({ toMonth: event.target.value })\n  }\n\n  handleChangeToYear = (event) => {\n    this.setState({ toYear: event.target.value })\n  }\n\n  handleChangeLanguage = (event) => {\n    this.setState({ language: event.target.value })\n  }\n\n  handleSubmit = (event) => {\n    event.preventDefault()\n    this.setState({ submit: true })\n  }\n\n  render() {\n    return (\n      <div className=\"NewRepos__container\">\n        <PeriodForm\n          handleSubmit={this.handleSubmit}\n          handleChangeFromMonth={this.handleChangeFromMonth}\n          handleChangeFromYear={this.handleChangeFromYear}\n          handleChangeToMonth={this.handleChangeToMonth}\n          handleChangeToYear={this.handleChangeToYear}\n          handleChangeLanguage={this.handleChangeLanguage}\n          keyReceived={this.props.keyReceived}\n          fromMonth={this.state.fromMonth}\n          fromYear={this.state.fromYear}\n          toMonth={this.state.toMonth}\n          toYear={this.state.toYear}\n          language={this.state.language}\n        />\n        {!this.state.submit && !localStorage.getItem('isLoggedIn') && (\n          <h4 className=\"NewRepos__Message\">\n            Monthly New Repo Trend: Please login to access visualisations\n          </h4>\n        )}\n        {!this.state.submit && localStorage.getItem('isLoggedIn') && (\n          <h4 className=\"NewRepos__Message\">\n            Monthly New Repo Trend: Select your request using the dropdowns\n          </h4>\n        )}\n        {this.state.submit && <Query\n          query={NEW_REPOS_QUERY(this.state.fromMonth + this.state.fromYear, this.state.toMonth + this.state.toYear, this.state.language, gql)}\n        >\n          {({ loading, error, data }) => {\n            if (loading) return (\n              <div className=\"NewRepos__LoaderBox\">\n                <div className=\"loader\"></div>\n              </div>\n            )\n            if (error) return <div className=\"NewRepos__Message\">Error, please see below. In the event of a network error you may need to delete local storage/cookies/cache and refresh page to login again<br />\n              ${error.toString()}</div>\n            console.log(`Operation quota cost: ${data.rateLimit.cost}`)\n            console.log(`Quota remaining: ${data.rateLimit.remaining}`)\n            console.log(`Reset at: ${data.rateLimit.resetAt}`)\n            console.log(Object.entries(data))\n            if (Object.entries(data).length > 1) return <LineGraph data={data} />\n            return null\n          }}\n        </Query>}\n      </div>\n    );\n  }\n}\n\nexport default NewRepos;\n","import React, { Component } from 'react';\nimport * as d3 from \"d3\";\n\nclass TreeMap extends Component {\n\n  render() {\n    return <div className=\"TreeMap__container\" style={{ position: 'relative' }}></div>\n  }\n  componentDidMount() {\n    console.log('mounted')\n    if (this.props.data) this.drawGraph(this.props.data)\n  }\n  componentDidUpdate(prevProps) {\n    console.log('updating')\n    if (this.props.data !== prevProps.data) {\n      this.removeGraph()\n      this.drawGraph(this.props.data)\n    }\n  }\n\n  removeGraph() {\n    console.log('removing old graph')\n    d3.selectAll(\".TreeMap__container > *\").remove();\n  }\n\n  drawGraph(dataObject) {\n\n    // Get data\n    const dataArray = Object.entries(dataObject).slice(2)\n                            .map(elem => {\n                              return {\n                                name: elem[0],\n                                value: elem[1].repositoryCount\n                              }\n                            })\n    \n    // Append entry for 'all other' (backing into the result)                            \n    const totalCount = dataObject.ALL.repositoryCount\n    const languageCount = Object.entries(dataObject).reduce((total, elem) => {\n      if (elem[0] !== 'ALL' && elem[0] !== 'rateLimit') return total + elem[1].repositoryCount\n      return total\n    }, 0)\n\n    dataArray.push({\n      name: 'All Other',\n      value: totalCount - languageCount\n    })\n\n    const dataHierarchy = {\n      name: 'Repositories',\n      children: dataArray\n    }\n\n    // Set visual dimensions and margin\n    const margin = window.innerWidth > 736 ? { top: 0, right: 0, bottom: 0, left: 0 } : { top: 10, right: 10, bottom: 10, left: 10 }\n    const height = window.innerWidth > 736 ? 500 - margin.top - margin.bottom : 500 - margin.top - margin.bottom\n    const width = window.innerWidth > 736 ? 736 - margin.left - margin.right : 350 - margin.left - margin.right\n\n    // Set root data for treemap (needs to be ordered) in case of multiple levels\n    const root = d3.hierarchy(dataHierarchy)\n    console.log(root)\n    root.sum((function (d) { return d.value }))\n       .sort(function (a, b) { return b.height - a.height || b.value - a.value; })\n    \n    const treemapLayout = d3.treemap()\n      .size([width, height])\n      .paddingOuter(10)\n      .paddingInner(5);\n\n    treemapLayout(root);\n\n    // Colour Legend\n    const color = d3.scaleOrdinal()\n      .domain(root.leaves().map(function (e) { return e.data.name }))\n      .range(d3.schemePaired);\n\n    // Render SVG container\n    console.log(root.leaves())\n    const svg = d3.select(\".TreeMap__container\")\n      .append(\"svg\")\n      .attr(\"width\", width + margin.left + margin.right)\n      .attr(\"height\", height + margin.top + margin.bottom)\n      // no border for now .style(\"border\", \"solid 1px black\")\n      .append(\"g\")\n      .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\")\n      .attr(\"class\", \"TreeMap__canvas\")\n\n    // add node  \n    const node = svg.selectAll('g')\n      .data(root.leaves())\n      .enter().append('g')\n      .attr('transform', function (d) {\n        return 'translate(' + [d.x0, d.y0] + ')'\n      })\n      .on(\"mouseover\", handleMouseOver)\n      .on(\"mouseout\", handleMouseOut)\n\n    // add tile shape to node\n    const tile = node.append('rect')\n      .attr('class', 'tile')\n      .attr(\"width\", function (d) { return d.x1 - d.x0; })\n      .attr(\"height\", function (d) { return d.y1 - d.y0; })\n      .attr('fill', function (d) {\n        return color(d.data.name)\n      })\n      .on(\"mouseover\", handleMouseOver)\n      .on(\"mouseout\", handleMouseOut)\n\n    // add text label\n    const label = node.append('text')\n      .attr('dy', '1em')\n      .attr('class', 'label')\n      .text(function (d) { return d.data.name })\n      .on(\"mouseover\", handleMouseOver)\n      .on(\"mouseout\", handleMouseOut)\n\n    // generate tooltip\n    const tootip = d3.select('.TreeMap__container').append('div')\n      .style('position', 'absolute')\n      .style('border', '1px solid grey')\n      .style('background-color', 'white')\n      .style('opacity', 0)\n      .attr('class', 'TreeMap__tooltip')\n\n\n    function handleMouseOver(d, i) {\n      d3.select(this).style('cursor', 'pointer')\n      d3.select('.TreeMap__tooltip')\n        .style(\"left\", (d3.event.pageX + 10 + shiftToolTipLeft(d3.event.pageX + 10, width)) + \"px\")\n        .style(\"top\", (d3.event.pageY - 800 + shiftToolTipTop(d3.event.pageY - 800, height)) + \"px\")\n        .html(`\n          <p>Language: ${d.data.name}</p>\n          <p>New Repos: ${d.data.value}</p>\n          <p>Proportion: ${d3.format(\".0%\")(d.data.value/totalCount)}</p>\n        `)\n        .style('padding', '0 10px')\n        .transition()\n        .duration(750)\n        .style('opacity', 1)\n        .style('z-index', 100)\n        \n    }\n\n    function handleMouseOut(d, i) {\n      d3.select('.TreeMap__tooltip')\n        .transition()\n        .duration(750)\n        .style('opacity', 0)\n        .style('z-index', -100)\n    }\n\n    // Mobile-friendly tooltip offsets to prevent going off-screen\n    function shiftToolTipTop(top, height) {\n      if (2 * top > height) return -0.5 * height\n      return 0\n    }\n    function shiftToolTipLeft(left, width) {\n      if (2 * left > width) return -0.5 * width\n      return 0\n    }\n  }\n}\n\nexport default TreeMap;\n\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { monthsWord, years } from '../../utils/queryHelpers'\n\nconst MonthForm = ({\n  handleSubmit,\n  handleChangeMonth,\n  handleChangeYear,\n  keyReceived,\n  month,\n  year\n}) => (\n    <form onSubmit={handleSubmit}>\n      <div className=\"month\">\n        Period:\n          <select value={month} onChange={handleChangeMonth}>\n          {monthsWord.map((elem, index) =>\n            <option key={`month-${index}`} value={elem}>\n              {elem}\n            </option>\n          )}\n        </select>\n        <select value={year.slice(2)} onChange={handleChangeYear}>\n          {years.map((elem, index) =>\n            <option key={`year-${index}`} value={elem}>\n              {elem}\n            </option>\n          )}\n        </select>\n      </div>\n      <input type=\"submit\" value=\"Submit\" disabled={!keyReceived} />\n    </form>\n  )\n\nMonthForm.propTypes = {\n  handleSubmit: PropTypes.func.isRequired,\n  handleChangeMonth: PropTypes.func.isRequired,\n  handleChangeYear: PropTypes.func.isRequired,\n  keyReceived: PropTypes.bool.isRequired,\n  month: PropTypes.string.isRequired,\n  year: PropTypes.string.isRequired\n}\n\nexport default MonthForm","import React, { Component } from 'react';\nimport { Query } from 'react-apollo'\nimport gql from 'graphql-tag'\nimport TreeMap from '../visualisations/TreeMap'\nimport {monthsWord, years, monthsDigit, LANGUAGE_REPOS_QUERY} from '../../utils/queryHelpers'\nimport MonthForm from '../forms/MonthForm'\n\nclass Languages extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      month: 'jan',\n      year: '2010',\n      submit: false\n    }\n  }\n\n  handleChangeMonth = (event) => {\n    this.setState({ month: event.target.value })\n  }\n\n  handleChangeYear = (event) => {\n    this.setState({ year: `20${event.target.value}` })\n  }\n\n  handleSubmit = (event) => {\n    event.preventDefault()\n    this.setState({ submit: true })\n  }\n\n  render() {\n    return (\n      <div className=\"Languages__container\">\n        <MonthForm\n          handleSubmit={this.handleSubmit}\n          handleChangeMonth={this.handleChangeMonth}\n          handleChangeYear={this.handleChangeYear}\n          keyReceived={this.props.keyReceived}\n          month={this.state.month}\n          year={this.state.year}\n        />\n        {!this.state.submit && !localStorage.getItem('isLoggedIn') && (\n          <h4 className=\"Languages__Message\">\n            Point-in-time View of Relative Language Popularity: Please login to access visualisations\n          </h4>\n        )}\n        {!this.state.submit && localStorage.getItem('isLoggedIn') && (\n          <h4 className=\"Languages__Message\">\n            Point-in-time View of Relative Language Popularity: Select your request using the dropdowns\n          </h4>\n        )}\n        {this.state.submit && <Query\n          query={LANGUAGE_REPOS_QUERY(`${this.state.year}-${monthsDigit[monthsWord.indexOf(this.state.month)]}`, gql)}\n        >\n          {({ loading, error, data }) => {\n            if (loading) return (\n              <div className=\"Languages__LoaderBox\">\n                <div className=\"loader\"></div>\n              </div>\n            )\n            if (error) return <div className=\"Languages__Message\">Error, please see below. <br />\n              ${error.toString()}\n              </div>\n            console.log(`Operation quota cost: ${data.rateLimit.cost}`)\n            console.log(`Quota remaining: ${data.rateLimit.remaining}`)\n            console.log(`Reset at: ${data.rateLimit.resetAt}`)\n            console.log(Object.entries(data))\n            if (Object.entries(data).length > 1) return <TreeMap data={data} />\n            return null\n          }}\n        </Query>}\n      </div>\n    );\n  }\n}\n\nexport default Languages;","import React, { Component } from 'react'\n\nimport MonthlyNewRepos from './queries/MonthlyNewRepos'\nimport Languages from './queries/Languages'\n\nimport '../styles/App.scss'\nimport '../styles/mobile.scss'\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"shards-ui/dist/css/shards.min.css\";\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loggingIn: false,\n      keyReceived: false\n    }\n  }\n\n  login() {\n    this.props.auth.login();\n  }\n\n  logout() {\n    this.props.auth.logout();\n  }\n\n  componentDidMount() {\n    const { renewSession } = this.props.auth;\n    if (localStorage.getItem('isLoggedIn') === 'true') {\n      // console.log('isLoggedIn = true; attempting to renew session...')\n      renewSession(authResult => {\n        this.getAPIToken(authResult.idToken, body => {\n          this.props.setToken(body)\n          this.setState({ keyReceived: true })\n        })\n      });\n    }\n    else if (this.props.history.location.hash) {\n      this.setState({loggingIn: true})\n      // console.log(`App.js props.history.location.hash: ${this.props.history.location.hash}`)\n      this.handleAuthentication(this.props.history)\n    }\n  }\n\n  handleAuthentication = ({ location }) => {\n    if (/access_token|id_token|error/.test(location.hash)) {\n      this.props.auth.handleAuthentication(authResult => {\n        this.getAPIToken(authResult.idToken, body => {\n          this.props.setToken(body)\n          this.setState({ keyReceived: true, loggingIn: false })\n        })\n      })\n    }\n  }\n\n  /**\n   * @jwt string: this is the ID token we were sent from auth0 upon authentication\n   * @callback: use this callback to pass the API token up to index.js for Apollo-link\n   */\n  getAPIToken = (jwt, callback) => {\n    const request = require(\"request\");\n    const options = {\n      method: 'GET',\n      url: 'https://wt-f1d82d610072deeaf794b2ad8e84524c-0.sandbox.auth0-extend.com/authToken',\n      headers: { authorization: `Bearer ${jwt}` },\n    };\n\n    request(options, function (error, response, body) {\n      if (error) {\n        // console.log(`App.js getAPIToken request() error: ${error}`)\n        throw new Error(error)\n      }\n      // console.log('App.js getAPIToken: initiating callback on response body:')\n      // console.log(body)\n      callback(body)\n    });\n  }\n\n  render() {\n    const { isAuthenticated } = this.props.auth\n    const { loggingIn, keyReceived } = this.state\n    const authCheck = isAuthenticated()\n\n    return (\n      <div className=\"App__container\">\n        <h1>GitHub Data Dashboard</h1>\n        {!authCheck && !loggingIn && (\n            <button\n              id=\"qsLoginBtn\"\n              className=\"btn-margin App__loginBtn\"\n              onClick={this.login.bind(this)}\n            >\n              Log In With GitHub\n            </button>\n        )}\n        {loggingIn && (\n          <p className=\"loggingIn\">Authenticating</p>\n        )}\n        {authCheck && !loggingIn && (\n          <div>\n            <span>Logged in successfully</span>\n            <button\n              id=\"qsLogoutBtn\"\n              className=\"btn-margin App__logoutBtn\"\n              onClick={this.logout.bind(this)}\n            >\n              Logout\n            </button>\n          </div>\n        )}\n        <h3>Instructions once authorised: for each visualisation, select the desired parameters and click submit to fetch and visualise data</h3>\n        <MonthlyNewRepos keyReceived={keyReceived} />\n        <Languages keyReceived={keyReceived} />\n      </div>\n    )\n  }\n}\n\nexport default App\n","import { createBrowserHistory } from 'history'\n\nexport default createBrowserHistory()\n","const AUTH_CONFIG = {\n  domain: 'dev-8-2xd3l4.eu.auth0.com',\n  clientId: 'xvOAhkUjsDBqDfFcPTaiwyf2Cn8gCQ7D',\n}\n\nif (process.env.REACT_APP_CONTEXT === 'localmachine') {\n  AUTH_CONFIG.callbackUrl = 'http://localhost:8080'\n} else AUTH_CONFIG.callbackUrl = 'https://ghstats-arty.herokuapp.com/'\n\nexport default AUTH_CONFIG\n\n\n// https://ghstats-arty.herokuapp.com/\n\n// gh dcab8318b05230785950\n\n// oa xvOAhkUjsDBqDfFcPTaiwyf2Cn8gCQ7D","import history from '../history';\nimport auth0 from 'auth0-js';\nimport AUTH_CONFIG from './auth0-variables';\n\nexport default class Auth {\n  accessToken;\n  idToken;\n  expiresAt;\n\n  auth0 = new auth0.WebAuth({\n    domain: AUTH_CONFIG.domain,\n    clientID: AUTH_CONFIG.clientId,\n    responseType: 'token id_token',\n    redirectUri: AUTH_CONFIG.callbackUrl,\n    scope: 'openid'\n  });\n\n  constructor() {\n    this.login = this.login.bind(this);\n    this.logout = this.logout.bind(this);\n    this.handleAuthentication = this.handleAuthentication.bind(this);\n    this.isAuthenticated = this.isAuthenticated.bind(this);\n    this.getAccessToken = this.getAccessToken.bind(this);\n    this.getIdToken = this.getIdToken.bind(this);\n    this.renewSession = this.renewSession.bind(this);\n  }\n\n  login() {\n    // console.log(`redirect URI: ${auth0.redirectUri}`)\n    this.auth0.authorize();\n  }\n\n  handleAuthentication(callback) {\n    console.log('calling parse hash')\n    this.auth0.parseHash((err, authResult) => {\n      if (authResult && authResult.accessToken && authResult.idToken) {\n        // console.log(`Auth.js handlAuthentication: parsed hash and handled auth; results as follows: ${authResult}`)\n        // console.log(authResult)\n        this.setSession(authResult);\n        callback(authResult)\n      } else if (err) {\n        history.replace('/');\n        console.log(err);\n        alert(`Error: ${err.error}. Check the console for further details.`);\n      }\n    });\n  }\n\n  getAccessToken() {\n    return this.accessToken;\n  }\n\n  getIdToken() {\n    return this.idToken;\n  }\n\n  setSession(authResult) {\n    // Set isLoggedIn flag in localStorage\n    localStorage.setItem('isLoggedIn', 'true');\n\n    // Set the time that the access token will expire at\n    let expiresAt = (authResult.expiresIn * 1000) + new Date().getTime();\n    this.accessToken = authResult.accessToken;\n    this.idToken = authResult.idToken;\n    this.expiresAt = expiresAt;\n\n    // navigate to the home route\n    history.replace('/');\n  }\n\n  renewSession(callback) {\n    this.auth0.checkSession({}, (err, authResult) => {\n       if (authResult && authResult.accessToken && authResult.idToken) {\n         this.setSession(authResult);\n         callback(authResult)\n       } else if (err) {\n         this.logout();\n         alert('Please login again after refreshing the page')\n         console.log(err);\n         console.log(`Auth.js renewSession: Could not get a new token (${err.error}: ${err.error_description}).`);\n       }\n    });\n  }\n\n  logout() {\n    // Remove tokens and expiry time\n    this.accessToken = null;\n    this.idToken = null;\n    this.expiresAt = 0;\n\n    // Remove isLoggedIn flag from localStorage\n    localStorage.removeItem('isLoggedIn');\n\n    // navigate to the home route\n    history.replace('/');\n  }\n\n  isAuthenticated() {\n    // Check whether the current time is past the\n    // access token's expiry time\n    let expiresAt = this.expiresAt;\n    return new Date().getTime() < expiresAt;\n  }\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { ApolloProvider } from 'react-apollo';\nimport { ApolloClient } from 'apollo-boost'\nimport { setContext } from 'apollo-link-context';\nimport { createHttpLink } from 'apollo-link-http';\nimport { InMemoryCache } from 'apollo-cache-inmemory';\nimport './styles/index.css';\nimport App from './components/App';\nimport Auth from './auth/Auth';\nimport history from './history';\nimport * as serviceWorker from './serviceWorker';\n\nconst auth = new Auth();\n\nconst httpLink = createHttpLink({\n  uri: 'https://api.github.com/graphql',\n})\n\n// let token = process.env.REACT_APP_GHTOKEN\nlet token = null\n\nconst authLink = setContext((_, { headers }) => {\n  // const token = process.env.REACT_APP_GHTOKEN\n  // return the headers to the context so httpLink can read them\n  return {\n    headers: {\n      ...headers,\n      authorization: token ? `Bearer ${token}` : \"\",\n    }\n  }\n})\n\nconst client = new ApolloClient({\n  link: authLink.concat(httpLink),\n  cache: new InMemoryCache()\n})\n\nReactDOM.render(\n  <ApolloProvider client={client}>\n    <App history={history} auth={auth} setToken={(githubAccess) => {\n      token = githubAccess\n    }}/>\n  </ApolloProvider>\n  , document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}